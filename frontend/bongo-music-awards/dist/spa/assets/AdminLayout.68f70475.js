import{d as N,u as R,o as n,c as d,w as a,a as e,e as T,F as j,r as E,f as p,g as u,Q as m,h as r,t as V,R as F,i as g,j as O,k as H,l as J,m as h,n as y,p as q,q as S,s as Y,v as A,x as I,y as G,z as K,A as $}from"./index.6752f776.js";import{Q as W,a as X,b as Z,c as ee}from"./QDrawer.6e8a124f.js";import{Q as k,a as s}from"./QItem.355e08c5.js";import{Q as c}from"./QItemLabel.19b8e7ad.js";import{Q as D}from"./QList.9c570d05.js";import{Q as ae,a as te}from"./QScrollArea.e6f68747.js";import{Q as oe,a as le}from"./QLayout.45275b4d.js";import{C as w}from"./ClosePopup.3b7057e4.js";import{u as se}from"./use-quasar.f64eb38d.js";import"./QResizeObserver.e458392c.js";import"./touch.3df10340.js";import"./selection.5b336d0e.js";import"./format.3e32b8d9.js";import"./QMenu.33b2b46c.js";import"./position-engine.6f0ccd7d.js";const ie=N("admin",{state:()=>({admin:[{icon:"mdi-home-circle",text:"Dashboard",path:"/admin/dashboard"},{icon:"mdi-calendar",text:"Events & Awards",path:"/admin/eventsandawards"},{icon:"mdi-vote",text:"Votes",path:"/admin/votes"},{icon:"mdi-account-group",text:"Users",path:"/admin/users"},{icon:"mdi-ticket",text:"Tickets",path:"/admin/tickets"},{icon:"mdi-wechat",text:"SMS",path:"/admin/sms"},{icon:"mdi-gmail",text:"Emails",path:"/admin/emails"}]})}),ne={__name:"AdminMenu",setup(L){const Q=R(),f=ie();return(P,v)=>(n(),d(ae,{class:"fit"},{default:a(()=>[e(D,{padding:""},{default:a(()=>[(n(!0),T(j,null,E(p(f).admin,(o,b)=>u((n(),d(k,{key:b,clickable:"",to:o.path,active:p(Q).path===o.path},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:o.icon},null,8,["name"])]),_:2},1024),e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r(V(o.text),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to","active"])),[[F]])),128))]),_:1})]),_:1}))}},re={class:"q-pa-md"},de={class:"q-pa-md q-mt-md q-gutter-sm"},ue=y("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1),me=y("div",{class:"text-h6 text-center"},"Change Your Password...",-1),Ve={__name:"AdminLayout",setup(L){const Q=sessionStorage.getItem("user"),f=JSON.parse(Q),P=sessionStorage.getItem("role"),v=g(!1);let o=g(!1);const b=se(),i=g(!0),C=g(""),x=g(""),B=async()=>{const _=await $.post("/updatePassword",{user_id:f.user_id,old_password:C.value,new_password:x.value});b.notify({message:_.data.data,color:"green",icon:"check",position:"top-right"})},U=()=>v.value=!v.value,z=async()=>{$.post("/logout"),sessionStorage.removeItem("token"),sessionStorage.removeItem("role"),sessionStorage.removeItem("auth"),sessionStorage.removeItem("user"),window.location.href="/login"};return O(()=>{H().$state.role=="admin"||(window.location.href="/login")}),(_,t)=>{const M=J("router-view");return n(),d(oe,{view:"hHh LpR fFf"},{default:a(()=>[e(Z,{elevated:"",class:"bg-primary text-white q-pa-sm"},{default:a(()=>[e(W,null,{default:a(()=>[e(h,{dense:"",flat:"",round:"",icon:"menu",onClick:U}),e(X,null,{default:a(()=>[r(" Bongo Music Awards ")]),_:1}),y("div",re,[e(te,{class:"glossy text-capitalize bg-primary",icon:"mdi-account-circle",label:p(f).name,rounded:"",flat:"",onClick:_.onMainClick},{default:a(()=>[e(D,{separator:""},{default:a(()=>[u((n(),d(k,{clickable:"",onClick:_.onItemClick},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(q,{icon:"mdi-account-circle",color:"primary","text-color":"white"})]),_:1}),e(s,null,{default:a(()=>[e(c,{class:"text-capitalize"},{default:a(()=>[r(V(p(P)),1)]),_:1}),e(c,{class:"text-capitalize",caption:""},{default:a(()=>[r(V(p(f).name),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]]),u((n(),d(k,{clickable:"",onClick:t[0]||(t[0]=l=>S(o)?o.value=!0:o=!0)},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Change Password")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-key",color:"primary"})]),_:1})]),_:1})),[[w]]),u((n(),d(k,{clickable:"",onClick:t[1]||(t[1]=l=>_.changeProfile=!0)},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Change Profile Image")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-image",color:"primary"})]),_:1})]),_:1})),[[w]]),u((n(),d(k,{clickable:"",onClick:t[2]||(t[2]=l=>z())},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Logout")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-logout",color:"primary"})]),_:1})]),_:1})),[[w]])]),_:1})]),_:1},8,["label","onClick"])])]),_:1})]),_:1}),e(ee,{"show-if-above":"",modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=l=>v.value=l),side:"left",bordered:"",class:"row justify-center",width:"250"},{default:a(()=>[y("div",de,[e(q,{size:"80px"},{default:a(()=>[ue]),_:1})]),e(ne)]),_:1},8,["modelValue"]),e(K,{modelValue:p(o),"onUpdate:modelValue":t[10]||(t[10]=l=>S(o)?o.value=l:o=l),persistent:""},{default:a(()=>[e(Y,{class:"bg-grey-3 q-pa-md",style:{width:"500px","max-width":"80vw"}},{default:a(()=>[e(A,null,{default:a(()=>[me]),_:1}),e(A,{class:"row justify-center items-center q-gutter-x-xl"},{default:a(()=>[e(I,{modelValue:C.value,"onUpdate:modelValue":t[5]||(t[5]=l=>C.value=l),dense:"",label:"Old Password",type:i.value?"password":"text",outlined:""},{append:a(()=>[e(m,{name:i.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[4]||(t[4]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),e(I,{modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=l=>x.value=l),class:"q-ma-md",dense:"",label:"New Password",type:i.value?"password":"text",outlined:""},{append:a(()=>[e(m,{name:i.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[6]||(t[6]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),e(G,{align:"center"},{default:a(()=>[e(h,{label:"Cancel",onClick:t[8]||(t[8]=l=>S(o)?o.value=!1:o=!1)}),u(e(h,{label:"Update",color:"primary",onClick:t[9]||(t[9]=l=>B())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,null,{default:a(()=>[e(M)]),_:1})]),_:1})}}};export{Ve as default};
