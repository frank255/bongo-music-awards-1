import{d as N,u as R,o as i,c as d,w as a,a as e,e as T,F as j,r as E,f as p,g as u,Q as m,h as r,t as V,R as F,i as g,j as O,k as H,l as J,m as h,n as y,p as q,q as S,s as Y,v as A,x as I,y as G,z as K,A as $}from"./index.598c9a8d.js";import{Q as W,a as X,b as Z,c as ee}from"./QDrawer.60bcfae4.js";import{Q as k,a as s}from"./QItem.26b25d2b.js";import{Q as c}from"./QItemLabel.c398f912.js";import{Q as D}from"./QList.e1fc4028.js";import{Q as ae,a as te}from"./QScrollArea.0ef7425c.js";import{Q as le,a as oe}from"./QLayout.574ddf25.js";import{C as w}from"./ClosePopup.5f203095.js";import{u as se}from"./use-quasar.fd5e324d.js";import"./QResizeObserver.1ffdc1c6.js";import"./touch.3df10340.js";import"./selection.c7185b4a.js";import"./QMenu.517fa527.js";import"./position-engine.14cce75f.js";const ne=N("admin",{state:()=>({admin:[{icon:"mdi-home-circle",text:"Dashboard",path:"/admin/dashboard"},{icon:"mdi-calendar",text:"Events & Awards",path:"/admin/eventsandawards"},{icon:"mdi-vote",text:"Votes",path:"/admin/votes"},{icon:"mdi-account-group",text:"Users",path:"/admin/users"},{icon:"mdi-ticket",text:"Tickets",path:"/admin/tickets"},{icon:"mdi-wechat",text:"SMS",path:"/admin/sms"},{icon:"mdi-gmail",text:"Emails",path:"/admin/emails"}]})}),ie={__name:"AdminMenu",setup(L){const Q=R(),f=ne();return(P,v)=>(i(),d(ae,{class:"fit"},{default:a(()=>[e(D,{padding:""},{default:a(()=>[(i(!0),T(j,null,E(p(f).admin,(l,b)=>u((i(),d(k,{key:b,clickable:"",to:l.path,active:p(Q).path===l.path},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:l.icon},null,8,["name"])]),_:2},1024),e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r(V(l.text),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to","active"])),[[F]])),128))]),_:1})]),_:1}))}},re={class:"q-pa-md"},de={class:"q-pa-md q-mt-md q-gutter-sm"},ue=y("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1),me=y("div",{class:"text-h6 text-center"},"Change Your Password...",-1),Se={__name:"AdminLayout",setup(L){const Q=sessionStorage.getItem("user"),f=JSON.parse(Q),P=sessionStorage.getItem("role"),v=g(!1);let l=g(!1);const b=se(),n=g(!0),C=g(""),x=g(""),B=async()=>{const _=await $.post("/updatePassword",{user_id:f.user_id,old_password:C.value,new_password:x.value});b.notify({message:_.data.data,color:"green",icon:"check",position:"top-right"})},U=()=>v.value=!v.value,z=async()=>{$.post("/logout"),sessionStorage.removeItem("token"),sessionStorage.removeItem("role"),sessionStorage.removeItem("auth"),sessionStorage.removeItem("user"),window.location.href="/login"};return O(()=>{H().$state.role=="admin"||(window.location.href="/login")}),(_,t)=>{const M=J("router-view");return i(),d(le,{view:"hHh LpR fFf"},{default:a(()=>[e(Z,{elevated:"",class:"bg-primary text-white q-pa-sm"},{default:a(()=>[e(W,null,{default:a(()=>[e(h,{dense:"",flat:"",round:"",icon:"menu",onClick:U}),e(X,null,{default:a(()=>[r(" Bongo Music Awards ")]),_:1}),y("div",re,[e(te,{class:"glossy text-capitalize bg-primary",icon:"mdi-account-circle",label:p(f).name,rounded:"",flat:"",onClick:_.onMainClick},{default:a(()=>[e(D,{separator:""},{default:a(()=>[u((i(),d(k,{clickable:"",onClick:_.onItemClick},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(q,{icon:"mdi-account-circle",color:"primary","text-color":"white"})]),_:1}),e(s,null,{default:a(()=>[e(c,{class:"text-capitalize"},{default:a(()=>[r(V(p(P)),1)]),_:1}),e(c,{class:"text-capitalize",caption:""},{default:a(()=>[r(V(p(f).name),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]]),u((i(),d(k,{clickable:"",onClick:t[0]||(t[0]=o=>S(l)?l.value=!0:l=!0)},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Change Password")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-key",color:"primary"})]),_:1})]),_:1})),[[w]]),u((i(),d(k,{clickable:"",onClick:t[1]||(t[1]=o=>_.changeProfile=!0)},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Change Profile Image")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-image",color:"primary"})]),_:1})]),_:1})),[[w]]),u((i(),d(k,{clickable:"",onClick:t[2]||(t[2]=o=>z())},{default:a(()=>[e(s,null,{default:a(()=>[e(c,null,{default:a(()=>[r("Logout")]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(m,{name:"mdi-logout",color:"primary"})]),_:1})]),_:1})),[[w]])]),_:1})]),_:1},8,["label","onClick"])])]),_:1})]),_:1}),e(ee,{"show-if-above":"",modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=o=>v.value=o),side:"left",bordered:"",class:"row justify-center",width:"250"},{default:a(()=>[y("div",de,[e(q,{size:"80px"},{default:a(()=>[ue]),_:1})]),e(ie)]),_:1},8,["modelValue"]),e(K,{modelValue:p(l),"onUpdate:modelValue":t[10]||(t[10]=o=>S(l)?l.value=o:l=o),persistent:""},{default:a(()=>[e(Y,{class:"bg-grey-3 q-pa-md",style:{width:"500px","max-width":"80vw"}},{default:a(()=>[e(A,null,{default:a(()=>[me]),_:1}),e(A,{class:"row justify-center items-center q-gutter-x-xl"},{default:a(()=>[e(I,{modelValue:C.value,"onUpdate:modelValue":t[5]||(t[5]=o=>C.value=o),dense:"",label:"Old Password",type:n.value?"password":"text",outlined:""},{append:a(()=>[e(m,{name:n.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[4]||(t[4]=o=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),e(I,{modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=o=>x.value=o),class:"q-ma-md",dense:"",label:"New Password",type:n.value?"password":"text",outlined:""},{append:a(()=>[e(m,{name:n.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[6]||(t[6]=o=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),e(G,{align:"center"},{default:a(()=>[e(h,{label:"Cancel",onClick:t[8]||(t[8]=o=>S(l)?l.value=!1:l=!1)}),u(e(h,{label:"Update",color:"primary",onClick:t[9]||(t[9]=o=>B())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(oe,null,{default:a(()=>[e(M)]),_:1})]),_:1})}}};export{Se as default};
