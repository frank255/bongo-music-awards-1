import{i as n,u as K,C as W,j as X,o as b,c as C,w as l,A as u,n as p,a,h as v,t as N,m,Q as A,aN as S,be as q,f as E,s as Z,v as $,x as B,y as ee,g as L,z as te}from"./index.598c9a8d.js";import{Q as h}from"./QSelect.cfb49e18.js";import{Q as z}from"./QTd.3de80ecf.js";import{Q as oe}from"./QTooltip.1cfa14e0.js";import{Q as le}from"./QTable.5be67063.js";import{Q as ae,a as ne}from"./QItem.26b25d2b.js";import{Q as se}from"./QPage.bbff6016.js";import{C as G}from"./ClosePopup.5f203095.js";import{u as re}from"./use-quasar.fd5e324d.js";import"./QChip.c5224e34.js";import"./QItemLabel.c398f912.js";import"./QMenu.517fa527.js";import"./position-engine.14cce75f.js";import"./selection.c7185b4a.js";import"./rtl.b51694b1.js";import"./QList.e1fc4028.js";import"./use-fullscreen.6fb5676b.js";const ie={class:"row scroll-on-mobile justify-around q-mt-xl"},ue={class:"q-mt-xl"},ce=p("p",{class:"text-weight-bolder text-capitalize q-pl-md"},"Nominees",-1),de=["href"],me=p("div",{class:"text-h6"},"Fill the form bellow",-1),Ee={__name:"EventPage",setup(pe){const i=re(),I=["Best Song Of The Year","Best Artist Of The Year"],F=["Bongo Fleva","Singeli"],P=n([{name:"artist_name",label:"Artist name",align:"left",field:e=>e.artist_name,sortable:!0},{name:"genre",label:"genre",align:"left",field:e=>e.genre,sortable:!0},{name:"category",label:"category",align:"left",field:e=>e.category,sortable:!0},{name:"work_name",label:"Artwork Name",align:"left",field:e=>e.artwork_name,sortable:!0},{name:"link",label:"Link",align:"left",field:e=>e.link,sortable:!0},{name:"action",label:"Action",align:"left"}]),x=n([]),c=n(""),g=n(""),y=n(""),w=n(!1);n(!1);const s=n(""),r=n("");n("");const f=K(),U=async()=>{const e=c.value==="active"?"closed":"active";await D(e)},D=async e=>{try{const t=await u.post(`/activateEvent/${f.params.event_id}`,{status:e});console.log(t),c.value=e}catch(t){console.error("Error sending API:",t)}},T=async()=>{try{const e=await u.post("/nominees",{event_id:f.params.event_id,genre:s.value,category:r.value,artist_name:_.value,artwork_name:g.value,link:y.value});window.location.reload(),i.notify({message:"Nominee Added Successfully",color:"green",icon:"check",position:"top-right"})}catch(e){i.notify({message:"Please Select Genre and Category",color:"red",icon:"warning",position:"top-right"}),console.log(e)}},O=async()=>{try{const e=await u.get(`/events/${f.params.event_id}`);c.value=e.data.data.event_status}catch(e){console.log(e)}},R=W(()=>{const e=s.value.toLowerCase(),t=r.value.toLowerCase();return x.value.filter(o=>(e===""||o.genre.toLowerCase().includes(e))&&(t===""||o.category.toLowerCase().includes(t)))}),j=(e,t)=>(t.filterGenre!==void 0&&(s.value=t.filterGenre),t.filterCategory!==void 0&&(r.value=t.filterCategory),filteredRows.value),Q=e=>{e==="filterGenre"?s.value="":e==="filterCategory"&&(r.value="")},Y=async()=>{try{const e=await u.get(`/nominees/${f.params.event_id}`);x.value=e.data}catch(e){e.response&&e.response.status===404?i.notify({message:"Bill blala successfully",color:"green",icon:"check",position:"top-right"}):console.error("Error fetching patient records:",e)}},d=n([]),k=n(d),_=n(null),M=(e,t)=>{if(e===""){t(()=>{k.value=d.value});return}t(()=>{const o=e.toLowerCase();k.value=d.value.filter(V=>V.toLowerCase().indexOf(o)>-1)})},H=async()=>{try{const t=(await u.get("/artist_list")).data.map(o=>o.name);d.value=t,console.log(d.value)}catch(e){console.error("Error fetching preferences:",e)}},J=async e=>{try{const t=await u.delete(`/nominees/${e}`);window.location.reload(),i.notify({message:"Nominee Deleted Successfully",color:"green",icon:"check",position:"top-right"})}catch(t){console.error("Error deleting item price:",t)}};return X(()=>{O(),Y(),H()}),(e,t)=>(b(),C(se,{padding:""},{default:l(()=>[p("div",ie,[a(m,{onClick:U,class:"text-capitalize",flat:"",color:c.value==="active"?"negative":"primary"},{default:l(()=>[v(N(c.value==="active"?"Close Event":"Activate Event"),1)]),_:1},8,["color"]),a(h,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=o=>s.value=o),outlined:"",dense:"",options:F,label:"Genre",style:q(E(i).platform.is.desktop?"width: 150px":"width:200px")},{prepend:l(()=>[s.value?(b(),C(A,{key:0,name:"mdi-close-circle",onClick:t[0]||(t[0]=o=>Q("filterGenre")),class:"q-mr-sm cursor-pointer"})):S("",!0)]),_:1},8,["modelValue","style"]),a(h,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=o=>r.value=o),outlined:"",dense:"",options:I,label:"Category",style:q(E(i).platform.is.desktop?"width: 150px":"width:200px")},{prepend:l(()=>[r.value?(b(),C(A,{key:0,name:"mdi-close-circle",onClick:t[2]||(t[2]=o=>Q("filterCategory")),class:"q-mr-sm cursor-pointer"})):S("",!0)]),_:1},8,["modelValue","style"])]),p("div",ue,[a(le,{bordered:"",flat:"",rows:R.value,columns:P.value,"row-key":"name",filter:e.filter,"filter-method":j,class:"q-mt-md"},{"top-right":l(()=>[a(m,{class:"text-capitalize",icon:"mdi-music-note-plus",color:"primary",onClick:t[4]||(t[4]=o=>{w.value=!0})},{default:l(()=>[v(" Add Nomenees ")]),_:1})]),"top-left":l(()=>[ce]),"body-cell-link":l(o=>[a(z,null,{default:l(()=>[p("a",{href:o.row.link,target:"_blank"},N(o.row.link),9,de)]),_:2},1024)]),"body-cell-action":l(o=>[a(z,null,{default:l(()=>[a(m,{icon:"mdi-delete",flat:"",color:"primary",onClick:V=>J(o.row.nominee_id)},{default:l(()=>[a(oe,null,{default:l(()=>[v("delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["rows","columns","filter"])]),a(te,{modelValue:w.value,"onUpdate:modelValue":t[9]||(t[9]=o=>w.value=o),position:"right"},{default:l(()=>[a(Z,{style:{width:"500px","max-width":"80vw",height:"100vh"}},{default:l(()=>[a($,null,{default:l(()=>[me]),_:1}),a($,{class:"q-pt-none q-gutter-y-md"},{default:l(()=>[a(h,{outlined:"",modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o),"use-input":"","input-debounce":"0",label:"Artist Name",options:k.value,onFilter:M},{"no-option":l(()=>[a(ae,null,{default:l(()=>[a(ne,{class:"text-grey"},{default:l(()=>[v(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"]),a(B,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=o=>g.value=o),dense:"",outlined:"",label:"Artwork Name"},null,8,["modelValue"]),a(B,{modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=o=>y.value=o),dense:"",outlined:"",label:"Artwork Link"},null,8,["modelValue"])]),_:1}),a(ee,null,{default:l(()=>[L(a(m,{flat:"",outline:"",color:"negative",label:"Cancel",class:"q-mx-sm text-capitalize"},null,512),[[G]]),L(a(m,{color:"primary",label:"Submit",onClick:t[8]||(t[8]=o=>T()),class:"q-mx-sm text-capitalize"},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ee as default};
